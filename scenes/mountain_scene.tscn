[gd_scene load_steps=17 format=3 uid="uid://boyhdxs14agwg"]

[ext_resource type="Script" path="res://scripts/gameplay/world.gd" id="1_m0ib1"]
[ext_resource type="PackedScene" uid="uid://bnnh20ail45mt" path="res://prefabs/character/player.tscn" id="2_5pt15"]
[ext_resource type="PackedScene" uid="uid://c0gr1eunsxwoj" path="res://geometry/world/Mountain0.96.glb" id="2_w1te3"]
[ext_resource type="PackedScene" uid="uid://c10q6utmqmbrk" path="res://prefabs/gameplay/hit_screen.tscn" id="4_qehhh"]
[ext_resource type="PackedScene" uid="uid://dkbtgrdu35uav" path="res://prefabs/gameplay/hud.tscn" id="5_h2uld"]
[ext_resource type="PackedScene" uid="uid://bn05oc16bv8kd" path="res://prefabs/gameplay/platforming/moving_block.tscn" id="6_eblp4"]
[ext_resource type="PackedScene" uid="uid://djuaoq7blvrls" path="res://prefabs/collectables/coin.tscn" id="6_wiqsv"]
[ext_resource type="PackedScene" uid="uid://c866pdji0vdsm" path="res://prefabs/gameplay/sensors/pressure_plate.tscn" id="8_p6buj"]
[ext_resource type="PackedScene" uid="uid://siaojteegwfd" path="res://prefabs/gameplay/enemy.tscn" id="9_s0van"]
[ext_resource type="PackedScene" uid="uid://bcgx7pq0b3mj5" path="res://prefabs/gameplay/npc.tscn" id="10_d6bax"]
[ext_resource type="PackedScene" uid="uid://djiycmbjjnmqw" path="res://prefabs/gameplay/shootingEnemy.tscn" id="11_oov7a"]
[ext_resource type="PackedScene" uid="uid://cfq0aps387o0v" path="res://prefabs/gameplay/projectile.tscn" id="12_57uu4"]

[sub_resource type="NavigationMesh" id="NavigationMesh_ili7a"]
vertices = PackedVector3Array(-7.73915, 6.5, -13.0372, -8.73915, 6.25, -13.0372, -7.73915, 6.5, -12.7872, -7.48915, 6.5, -14.2872, -7.73915, 6.5, -13.0372, -7.73915, 6.5, -12.7872, -6.73915, 6.5, -15.0372, -2.98915, 6.5, -11.0372, -2.23915, 6.5, -13.7872, -3.23915, 6.5, -15.0372, -6.73915, 6.5, -15.0372, -7.73915, 6.5, -12.7872, -6.23915, 6.5, -10.7872, -7.73915, 6.5, -12.7872, -7.23915, 6.5, -11.2872, -6.23915, 6.5, -10.7872, -2.98915, 6.5, -11.0372, -2.23915, 6.5, -12.2872, -2.23915, 6.5, -13.7872, -0.739153, 5.5, -7.78716, -0.239153, 5.25, -8.28716, -0.489153, 5.25, -9.03716, -6.23915, 5.5, -8.78716, -3.48915, 5.5, -7.78716, -9.23915, 4.5, -5.78716, -7.73915, 4.5, -5.78716, -7.73915, 4.5, -6.78716, -9.23915, 4.5, -7.03716, -6.23915, 5.5, -8.78716, -5.73915, 5.5, -7.28716, -3.48915, 5.5, -7.78716, -5.73915, 5.5, -7.28716, -9.23915, 4.5, -7.03716, -7.73915, 4.5, -6.78716, -8.07249, 4.5, -7.1205, -5.73915, 5.5, -7.28716, -7.73915, 4.5, -6.78716, -3.48915, 5.25, -6.78716, -3.48915, 5.5, -7.78716, -6.32249, 5.25, -6.78716, -0.489153, 5.25, -9.03716, -8.23915, 5.5, -9.03716, -6.23915, 5.5, -8.78716, 0.760847, 3.5, -6.28716, 0.510847, 3.25, -7.03716, -0.239153, 3.75, -7.03716, -0.489153, 3.5, -5.78716, 0.0108471, 3.5, -5.03716, -0.739153, 3.5, -4.78716, 0.0108471, 3.5, -5.03716, -0.489153, 3.5, -5.78716, -3.48915, 3.5, -5.78716, -4.23915, 3.5, -5.03716, -10.7392, 3.5, -4.78716, -11.4892, 3.5, -5.53716, -11.2392, 3.5, -4.28716, -10.7392, 3.5, -4.78716, -11.2392, 3.5, -4.28716, -10.2392, 3.5, -3.78716, -7.48915, 3.25, -3.78716, -7.48915, 3.5, -4.78716, -7.23915, 3.5, -5.03716, -5.73915, 3.5, -4.78716, -6.23915, 3.5, -5.53716, 2.51085, 2.5, -4.78716, 1.01085, 2.5, -4.78716, 0.510847, 2.5, -4.03716, 2.51085, 2.25, -3.03716, -1.48915, 2.5, -2.78716, 2.51085, 2.25, -3.03716, 0.510847, 2.5, -4.03716, -1.48915, 2.5, -3.78716, -5.23915, 2.5, -2.78716, -5.23915, 2.5, -3.78716, -6.48915, 2.75, -3.78716, -6.48915, 2.5, -2.78716, -10.7392, 2.5, -2.78716, -10.7392, 2.5, -1.78716, -6.48915, 2.5, -2.03716, -6.48915, 2.5, -2.78716, -6.48915, 2.5, -2.03716, -5.23915, 2.5, -2.78716, -6.48915, 2.5, -2.78716, -4.23915, 0.5, 0.212837, -4.73915, 0.5, 0.462837, -4.98915, 0.5, 2.21284, -12.4892, 0.5, 1.96284, -12.4892, 0.5, 4.21284, -11.7392, 0.5, 4.96284, -4.98915, 0.5, 2.21284, -2.48915, 0.5, -1.03716, -2.48915, 0.5, -3.78716, -4.23915, 0.5, -3.78716, -4.23915, 0.5, 0.212837, -2.48915, 0.5, -1.03716, -4.23915, 0.5, 0.212837, -4.98915, 0.5, 2.21284, 1.26085, 0.5, 1.21284, 0.510847, 0.5, 0.462837, 0.510847, 0.5, 0.462837, 0.510847, 0.5, -0.787163, -2.48915, 0.5, -1.03716, 2.51085, 0.5, 4.46284, 2.51085, 0.5, 1.21284, 1.26085, 0.5, 1.21284, -4.98915, 0.5, 2.21284, -11.7392, 0.5, 4.96284, 2.01085, 0.5, 4.96284, 1.51085, 1.25, -1.03716, 1.51085, 1.25, -0.0371628, 2.51085, 1.25, -0.0371628, 2.51085, 1.5, -1.28716, -11.4892, 1.5, 0.212837, -9.48915, 1.5, -0.0371628, -9.73915, 1.5, -0.787163, -11.4892, 1.25, -0.787163)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(4, 3, 5), PackedInt32Array(5, 3, 6), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 12), PackedInt32Array(9, 12, 11), PackedInt32Array(9, 11, 10), PackedInt32Array(13, 15, 14), PackedInt32Array(18, 17, 16), PackedInt32Array(20, 19, 21), PackedInt32Array(21, 19, 23), PackedInt32Array(21, 23, 22), PackedInt32Array(25, 24, 26), PackedInt32Array(26, 24, 27), PackedInt32Array(30, 29, 28), PackedInt32Array(32, 34, 33), PackedInt32Array(33, 34, 31), PackedInt32Array(36, 35, 39), PackedInt32Array(39, 35, 37), PackedInt32Array(37, 35, 38), PackedInt32Array(42, 41, 40), PackedInt32Array(44, 43, 45), PackedInt32Array(45, 43, 46), PackedInt32Array(46, 43, 47), PackedInt32Array(49, 48, 50), PackedInt32Array(50, 48, 51), PackedInt32Array(51, 48, 52), PackedInt32Array(55, 54, 53), PackedInt32Array(57, 56, 58), PackedInt32Array(58, 56, 59), PackedInt32Array(59, 56, 60), PackedInt32Array(63, 62, 61), PackedInt32Array(65, 64, 66), PackedInt32Array(66, 64, 67), PackedInt32Array(71, 70, 68), PackedInt32Array(68, 70, 69), PackedInt32Array(75, 74, 72), PackedInt32Array(72, 74, 73), PackedInt32Array(79, 78, 76), PackedInt32Array(76, 78, 77), PackedInt32Array(82, 81, 80), PackedInt32Array(85, 84, 83), PackedInt32Array(87, 86, 88), PackedInt32Array(88, 86, 89), PackedInt32Array(91, 90, 92), PackedInt32Array(92, 90, 93), PackedInt32Array(95, 94, 96), PackedInt32Array(96, 94, 98), PackedInt32Array(96, 98, 97), PackedInt32Array(101, 100, 99), PackedInt32Array(102, 107, 103), PackedInt32Array(103, 107, 104), PackedInt32Array(104, 107, 105), PackedInt32Array(105, 107, 106), PackedInt32Array(109, 108, 110), PackedInt32Array(110, 108, 111), PackedInt32Array(114, 113, 115), PackedInt32Array(115, 113, 112)]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_brus3"]

[sub_resource type="Sky" id="Sky_sy4qi"]
sky_material = SubResource("ProceduralSkyMaterial_brus3")

[sub_resource type="Environment" id="Environment_yr4us"]
background_mode = 2
sky = SubResource("Sky_sy4qi")

[node name="MountainScene" type="Node3D"]
script = ExtResource("1_m0ib1")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_ili7a")

[node name="Mountain0_96" parent="NavigationRegion3D" instance=ExtResource("2_w1te3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.9631, 0, -2.51111)

[node name="Player" parent="." instance=ExtResource("2_5pt15")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -3.27288, 0.0712194, 4.40733)
jump_speed = 6

[node name="HitScreen" parent="." instance=ExtResource("4_qehhh")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.951444, 0.307822, 0, -0.307822, 0.951444, 0, 6.22983, 9.69841)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_yr4us")

[node name="HUD" parent="." instance=ExtResource("5_h2uld")]
num_of_coins = 3

[node name="MovingBlock" parent="." instance=ExtResource("6_eblp4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.44051, 0.56298, -3.8457)
signal_emitter_path = NodePath("../PressurePlate")

[node name="Coin" parent="." instance=ExtResource("6_wiqsv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.3912, 1.39693, 0.0245013)

[node name="Coin2" parent="." instance=ExtResource("6_wiqsv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08926, 1.39693, -0.218419)

[node name="Coin3" parent="." instance=ExtResource("6_wiqsv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.50895, 6.52959, -12.4676)

[node name="PressurePlate" parent="." instance=ExtResource("8_p6buj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.99781, -0.0587921, 1.07251)

[node name="Enemy" parent="." instance=ExtResource("9_s0van")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.43982, 2.3576, -4.99255)
speed = 1.0
player_path = NodePath("../Player")
follow_distance = 4.0
return_distance = 6.0

[node name="NPC" parent="." instance=ExtResource("10_d6bax")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.578247, -2.69123)
player = NodePath("../Player")
message = "To get what we want, we need to be down"

[node name="ShootingEnemy" parent="." instance=ExtResource("11_oov7a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.77502, 6.53695, -13.5122)
follow_distance = 5.0
player_path = NodePath("../Player")
projectile_scene = ExtResource("12_57uu4")
projectile_speed = 8.0

[connection signal="player_hit" from="Player" to="Player" method="_on_player_hit"]
[connection signal="player_hit" from="Player" to="HUD" method="_on_player_player_hit"]
[connection signal="coin_collected" from="Coin" to="HUD" method="_on_coin_coin_collected"]
[connection signal="coin_collected" from="Coin2" to="HUD" method="_on_coin_coin_collected"]
[connection signal="coin_collected" from="Coin3" to="HUD" method="_on_coin_coin_collected"]
